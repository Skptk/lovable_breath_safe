#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ”’ Running pre-commit security scan..."

# Run custom secret scanner
echo "ğŸ“¡ Running custom secret scanner..."
node scripts/secret-scan.js --staged
if [ $? -ne 0 ]; then
    echo "âŒ Secret scan failed! Please fix any detected secrets before committing."
    exit 1
fi
echo "âœ… Secret scan passed"

# Run linting
echo "ğŸ” Running ESLint..."
npm run lint
if [ $? -ne 0 ]; then
    echo "âŒ Linting failed! Please fix any linting issues before committing."
    exit 1
fi
echo "âœ… Linting passed"

echo "ğŸ‰ Pre-commit checks passed!"
